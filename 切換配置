--// Services
local Players = game:GetService("Players")
local player = Players.LocalPlayer

--// States
local selectedType = nil
local autoEquipEnabled = true
local guiOpen = true

--// GUI
local ScreenGui = Instance.new("ScreenGui", player.PlayerGui)
ScreenGui.Name = "AutoEquipGUI"
ScreenGui.ResetOnSpawn = false

local Main = Instance.new("Frame", ScreenGui)
Main.Size = UDim2.fromScale(0.25, 0.4)
Main.Position = UDim2.fromScale(0.35, 0.3)
Main.BackgroundColor3 = Color3.fromRGB(35,35,35)
Main.Active = true
Main.Draggable = true

local Title = Instance.new("TextLabel", Main)
Title.Size = UDim2.new(1,0,0.15,0)
Title.Text = "Auto Equip (Blox Fruits)"
Title.BackgroundColor3 = Color3.fromRGB(25,25,25)
Title.TextColor3 = Color3.new(1,1,1)
Title.TextScaled = true

-- Control Buttons
local MinBtn = Instance.new("TextButton", Main)
MinBtn.Size = UDim2.fromScale(0.15,0.15)
MinBtn.Position = UDim2.fromScale(0.7,0)
MinBtn.Text = "-"
MinBtn.TextScaled = true

local CloseBtn = Instance.new("TextButton", Main)
CloseBtn.Size = UDim2.fromScale(0.15,0.15)
CloseBtn.Position = UDim2.fromScale(0.85,0)
CloseBtn.Text = "X"
CloseBtn.TextScaled = true

-- Buttons Container
local Buttons = Instance.new("Frame", Main)
Buttons.Position = UDim2.new(0,0,0.15,0)
Buttons.Size = UDim2.new(1,0,0.85,0)
Buttons.BackgroundTransparency = 1

-- Button Creator
local function createButton(text, order)
    local btn = Instance.new("TextButton", Buttons)
    btn.Size = UDim2.new(0.9,0,0.15,0)
    btn.Position = UDim2.new(0.05,0,(order-1)*0.17,0)
    btn.Text = text
    btn.TextScaled = true
    return btn
end

-- ON / OFF Button
local ToggleBtn = createButton("Auto Equip : ON",1)
ToggleBtn.BackgroundColor3 = Color3.fromRGB(60,150,60)

local MeleeBtn = createButton("拳法 (Melee)",2)
local FruitBtn = createButton("果實 (Fruit)",3)
local SwordBtn = createButton("刀 (Sword)",4)
local GunBtn   = createButton("槍 (Gun)",5)

--// Equip Function
local function equipByType(toolType)
    if not autoEquipEnabled then return end

    selectedType = toolType
    local char = player.Character or player.CharacterAdded:Wait()
    local hum = char:WaitForChild("Humanoid")

    for _, tool in ipairs(player.Backpack:GetChildren()) do
        if tool:IsA("Tool") and tool.ToolTip == toolType then
            hum:EquipTool(tool)
            break
        end
    end
end

--// Toggle ON/OFF
ToggleBtn.MouseButton1Click:Connect(function()
    autoEquipEnabled = not autoEquipEnabled

    if autoEquipEnabled then
        ToggleBtn.Text = "Auto Equip : ON"
        ToggleBtn.BackgroundColor3 = Color3.fromRGB(60,150,60)
    else
        ToggleBtn.Text = "Auto Equip : OFF"
        ToggleBtn.BackgroundColor3 = Color3.fromRGB(150,60,60)
    end
end)

--// Equip Buttons
MeleeBtn.MouseButton1Click:Connect(function()
    equipByType("Melee")
end)

FruitBtn.MouseButton1Click:Connect(function()
    equipByType("Blox Fruit")
end)

SwordBtn.MouseButton1Click:Connect(function()
    equipByType("Sword")
end)

GunBtn.MouseButton1Click:Connect(function()
    equipByType("Gun")
end)

--// Respawn Auto Equip
player.CharacterAdded:Connect(function()
    if autoEquipEnabled and selectedType then
        task.wait(1)
        equipByType(selectedType)
    end
end)

--// Minimize
MinBtn.MouseButton1Click:Connect(function()
    guiOpen = not guiOpen
    Buttons.Visible = guiOpen
    Main.Size = guiOpen and UDim2.fromScale(0.25,0.4) or UDim2.fromScale(0.25,0.15)
end)

--// Close
CloseBtn.MouseButton1Click:Connect(function()
    ScreenGui:Destroy()
end)
